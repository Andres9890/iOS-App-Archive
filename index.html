<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iOS App Archive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }

        :root {
            --header-bg: linear-gradient(145deg, #3a3a3c, #1c1c1e);
            --list-bg-1: #e8e8e8;
            --list-bg-2: #d8d8d8;
            --button-bg: linear-gradient(145deg, #d0d0d0, #b0b0b0);
            --modal-bg: linear-gradient(145deg, #e6e6e6, #c6c6c6);
            --shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            --text-dark: #333;
            --text-light: #fff;
            --accent: #007aff;
            --red-text: #ff3b30;
            --modal-height: 85vh;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa, #e4e7eb);
            min-height: 100vh;
            padding-bottom: 60px;
            overflow-x: hidden;
        }

        /* Compact Header */
        header {
            background: var(--header-bg);
            height: 60px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-content {
            max-width: 1200px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            color: var(--text-light);
        }

        .logo i {
            font-size: 28px;
            margin-right: 12px;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Search Container */
        .search-container {
            display: none;
            max-width: 800px;
            margin: 15px auto;
            padding: 0 20px;
            position: relative;
        }

        .search-box {
            display: flex;
            align-items: center;
            width: 100%;
        }

        .search-input {
            flex: 1;
            padding: 12px 50px 12px 15px;
            border-radius: 30px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 16px;
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.2);
        }

        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.2), 0 0 0 2px var(--accent);
        }

        .search-container i {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
        }

        .cancel-btn {
            background: var(--button-bg);
            border: none;
            color: var(--text-dark);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 20px;
            margin-left: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .cancel-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
            border-radius: 20px 20px 0 0;
        }

        .cancel-btn:hover {
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .cancel-btn:active {
            transform: translateY(1px);
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* Main Content */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
        }

        /* Featured View */
        .app-list {
            display: none;
            flex-direction: column;
            gap: 2px;
            margin-top: 20px;
        }

        .app-list.active {
            display: flex;
        }

        .app-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--list-bg-1);
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }

        .app-item:nth-child(even) {
            background: var(--list-bg-2);
        }

        .app-item:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .app-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            margin-right: 15px;
            flex-shrink: 0;
        }

        .app-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .app-info {
            flex-grow: 1;
        }

        .app-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 3px;
        }

        .app-developer {
            font-size: 14px;
            color: #666;
        }

        /* View Details Button */
        .app-button {
            background: var(--button-bg);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .app-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
            border-radius: 5px 5px 0 0;
        }

        .app-button:hover {
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .app-button:active {
            transform: translateY(1px);
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* Search Results */
        .search-results {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .search-results.active {
            display: grid;
        }

        .app-card {
            background: linear-gradient(to bottom, #ffffff, #eaeaea);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #ddd;
        }

        .app-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }

        .card-icon {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            margin: 0 auto 15px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .card-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .card-developer {
            font-size: 13px;
            color: #666;
            margin-bottom: 15px;
        }

        .card-button {
            background: var(--button-bg);
            border: none;
            color: var(--text-dark);
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            transition: all 0.2s ease;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .card-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
            border-radius: 15px 15px 0 0;
        }

        .card-button:hover {
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .card-button:active {
            transform: translateY(1px);
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* Bottom Navigation Bar */
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, #3a3a3c, #1c1c1e);
            display: flex;
            border-top: 1px solid #444;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.2);
            z-index: 100;
        }

        .tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            color: #999;
            background: linear-gradient(to top, #2a2a2a, #1a1a1a);
            border-top: 3px solid transparent;
        }

        .tab.active {
            color: white;
            border-top: 3px solid #007aff;
            background: linear-gradient(to top, #3a3a3a, #1f1f1f);
            box-shadow: inset 0 10px 10px rgba(0, 0, 0, 0.3);
        }

        .tab:first-child {
            border-right: 1px solid #333;
        }

        .tab:last-child {
            border-left: 1px solid #333;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            top: -3px;
            left: 0;
            right: 0;
            height: 3px;
            background: #007aff;
            box-shadow: 0 0 10px rgba(0, 122, 255, 0.5);
        }

        /* Modal Styles (Preserved from original) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: var(--modal-bg);
            border-radius: 24px 24px 0 0;
            width: 100%;
            max-width: 800px;
            max-height: var(--modal-height);
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            background: var(--button-bg);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 22px;
            cursor: pointer;
            color: #666;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .close-modal:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
            border-radius: 50% 50% 0 0;
        }

        .close-modal:hover {
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .close-modal:active {
            transform: translateY(1px);
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .modal-icon {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            overflow: hidden;
            margin-right: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .modal-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-title {
            font-size: 26px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .modal-developer {
            font-size: 16px;
            color: #666;
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section h3 {
            font-size: 18px;
            margin-bottom: 12px;
            color: #444;
            display: flex;
            align-items: center;
        }

        .modal-section h3 i {
            margin-right: 8px;
            color: var(--accent);
        }

        .modal-section p {
            font-size: 15px;
            line-height: 1.5;
            color: #444;
            margin-bottom: 12px;
        }

        .versions-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .version-group {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            padding: 12px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .version-group h4 {
            font-size: 15px;
            margin-bottom: 8px;
            color: #444;
        }

        .version-list {
            list-style-type: none;
        }

        .version-list li {
            padding: 6px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .version-list li:last-child {
            border-bottom: none;
        }

        .unarchived-label {
            color: var(--red-text);
            font-weight: 600;
            margin-top: 10px;
        }

        .compatibility-text {
            font-size: 15px;
            margin-bottom: 15px;
            color: #444;
        }

        .download-button {
            background: var(--button-bg);
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-left: 10px;
        }

        .download-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
            border-radius: 5px 5px 0 0;
        }

        .download-button:hover {
            background: linear-gradient(145deg, #e0e0e0, #c0c0c0);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .download-button:active {
            transform: translateY(1px);
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 15px;
            }
            
            .container {
                padding: 0 15px;
            }

            .modal-content {
                padding: 20px 15px;
            }

            .modal-header {
                flex-direction: column;
                text-align: center;
            }

            .modal-icon {
                margin-right: 0;
                margin-bottom: 12px;
            }
            
            .search-results {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .logo h1 {
                font-size: 20px;
            }
            
            .logo i {
                font-size: 24px;
            }
            
            .search-input {
                padding: 10px 45px 10px 15px;
            }
            
            .cancel-btn {
                padding: 8px 15px;
                font-size: 13px;
            }
            
            .modal-title {
                font-size: 22px;
            }
            
            .app-card {
                padding: 12px;
            }
            
            .card-icon {
                width: 70px;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <!-- Compact Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-download"></i>
                <h1>iOS App Archive</h1>
            </div>
        </div>
    </header>
    
    <!-- Search Container (Hidden by default) -->
    <div class="search-container" id="searchContainer">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" class="search-input" id="searchInput" placeholder="Search apps...">
            <button class="cancel-btn" id="cancelSearch">Cancel</button>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Featured Apps View -->
        <div class="app-list active" id="featuredView">
            <!-- Featured apps will be loaded here -->
        </div>
        
        <!-- Search Results View -->
        <div class="search-results" id="searchResults">
            <!-- Search results will be loaded here -->
        </div>
    </div>
    
    <!-- Modal Container -->
    <div id="modalContainer"></div>
    
    <!-- Bottom Navigation Bar -->
    <div class="bottom-bar">
        <div class="tab active" data-tab="featured">Featured</div>
        <div class="tab" data-tab="search">Search</div>
    </div>
    
    <script>
        // All your apps with complete information
        const apps = [
            {
                id: "escape-if-you-can",
                title: "Escape If You Can",
                developer: "mobigrow",
                description: "Can You Escape - Deluxe - Out Now!\nAdvance to the next floor by solving the puzzles!\nYou can pick certain items up and use them from your inventory.\nKeep the Escape If You Can app, so we can notify you of new levels.\n9 floors available at the moment!\nSmartphone puzzles! Addicting mini puzzles!\nGorgeous graphics and different themed floors!\nConstant updates of New Floors!\nit's FREE!",
                versions: {
                    archived: ["1.3.3"],
                    unarchived: ["1.0.0", "1.1.0", "1.2.0", "1.3.0", "1.3.1", "1.3.2"]
                },
                compatibility: "iOS 4.3 and Later",
                icon: "https://archive.org/download/com.dozengames.floorsescape-ios4.3-clutch-2.0.4_202412/th-3234825290_thumb.jpg",
                downloadUrl: "https://archive.org/download/com.dozengames.floorsescape-ios4.3-clutch-2.0.4_202412/com.dozengames.FloorsEscape-iOS4.3-%28Clutch-2.0.4%29.ipa"
            },
            {
                id: "jelly-car-3",
                title: "JellyCar 3 Lite",
                developer: "Disney",
                description: "The wobbly, bouncy, jelly-licious driving game is back!\nDrive through squishy worlds with new vehicles and obstacles.\nUnique jelly physics make every drive different.\nColorful, imaginative levels to explore.\nSimple controls with challenging gameplay.\nPerfect for quick gaming sessions.",
                versions: {
                    archived: ["1.0", "1.0.1"],
                    unarchived: []
                },
                compatibility: "iPhoneOS 3.1.3 and Later",
                icon: "https://archive.org/download/com.disney.jellycar3lite-ios3.1.3-clutch-2.0.4/JellyCar3Lite.png"
            },
            {
                id: "disney-gift-card",
                title: "Disney Gift Card",
                developer: "Disney",
                description: "Check your Disney Gift Card balance anytime.\nSecure and easy to use.\nManage multiple gift cards in one place.\nView transaction history.\nRedeem new gift cards with your camera.\nOfficial Disney app with trusted security.",
                versions: {
                    archived: ["1.0"],
                    unarchived: []
                },
                compatibility: "iPhoneOS 3.1.2 and Later",
                icon: "https://archive.org/download/com.disney.disneygiftcard-ios3.1.2-clutch-2.0.4/DisneyGift.png"
            },
            {
                id: "jelly-car-2",
                title: "Jelly Car 2",
                developer: "Disney",
                description: "The sequel to the original jelly physics driving game!\nNew vehicles with unique jelly properties.\nMore challenging levels and obstacles.\nColorful, squishy environments to explore.\nSimple one-touch controls.\nFun for all ages with surprising depth.",
                versions: {
                    archived: ["1.0", "1.0.1", "1.1", "1.2", "1.2.1", "1.2.2"],
                    unarchived: []
                },
                compatibility: "iOS 4.0 and Later",
                icon: "https://archive.org/download/jelly-car-2-1.2.2/IMG_4924.jpeg"
            },
            {
                id: "flappy-bird",
                title: "Flappy Bird",
                developer: "dotGears",
                description: "The infamous challenging flying game!\nTap to keep the bird flying through pipes.\nSimple controls, extremely difficult to master.\nCompete with friends for high scores.\nMinimalist pixel art style.\nAddictive one-more-try gameplay.",
                versions: {
                    archived: ["1.0", "1.1", "1.2", "1.3"],
                    unarchived: []
                },
                compatibility: "iOS 6.0 and Later",
                icon: "https://archive.org/download/flappy-bird-v-1.3_202412/Flappy.png"
            }
        ];

        // DOM Elements
        const featuredView = document.getElementById('featuredView');
        const searchResults = document.getElementById('searchResults');
        const searchContainer = document.getElementById('searchContainer');
        const searchInput = document.getElementById('searchInput');
        const cancelSearch = document.getElementById('cancelSearch');
        const tabs = document.querySelectorAll('.tab');
        const modalContainer = document.getElementById('modalContainer');
        
        // Render featured apps
        function renderFeaturedApps() {
            featuredView.innerHTML = '';
            
            apps.forEach((app, index) => {
                const appItem = document.createElement('div');
                appItem.className = 'app-item';
                
                appItem.innerHTML = `
                    <div class="app-icon">
                        <img src="${app.icon}" alt="${app.title} Icon" onerror="this.src='https://via.placeholder.com/100/007aff/ffffff?text=App'">
                    </div>
                    <div class="app-info">
                        <div class="app-title">${app.title}</div>
                        <div class="app-developer">${app.developer}</div>
                    </div>
                    <button class="app-button" data-app-id="${app.id}">View Details</button>
                `;
                
                featuredView.appendChild(appItem);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.app-button').forEach(button => {
                button.addEventListener('click', function() {
                    const appId = this.getAttribute('data-app-id');
                    document.getElementById(`${appId}Modal`).classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });
        }
        
        // Render search results
        function renderSearchResults(filteredApps = []) {
            searchResults.innerHTML = '';
            
            if (filteredApps.length === 0) {
                searchResults.innerHTML = '<p style="text-align: center; grid-column: 1/-1; padding: 20px; color: #666;">No apps found. Try a different search term.</p>';
                return;
            }
            
            filteredApps.forEach(app => {
                const appCard = document.createElement('div');
                appCard.className = 'app-card';
                
                appCard.innerHTML = `
                    <div class="card-icon">
                        <img src="${app.icon}" alt="${app.title} Icon" onerror="this.src='https://via.placeholder.com/100/007aff/ffffff?text=App'">
                    </div>
                    <div class="card-name">${app.title}</div>
                    <div class="card-developer">${app.developer}</div>
                    <button class="card-button" data-app-id="${app.id}">View Details</button>
                `;
                
                searchResults.appendChild(appCard);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.card-button').forEach(button => {
                button.addEventListener('click', function() {
                    const appId = this.getAttribute('data-app-id');
                    document.getElementById(`${appId}Modal`).classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });
        }
        
        // Create modals
        function createModals() {
            modalContainer.innerHTML = '';
            
            apps.forEach(app => {
                // Create version list items
                let versionItems = '';
                
                // Add archived versions if they exist
                if (app.versions.archived.length > 0) {
                    versionItems += `
                        <div class="version-group">
                            <h4>Archived Versions</h4>
                            <ul class="version-list">
                                ${app.versions.archived.map(v => {
                                    // Special case for Escape If You Can 1.3.3 with download button
                                    if (app.id === "escape-if-you-can" && v === "1.3.3") {
                                        return `<li>
                                            ${v}
                                            <a href="${app.downloadUrl}" download class="download-button">
                                                <i class="fas fa-download"></i> Download IPA
                                            </a>
                                        </li>`;
                                    }
                                    return `<li>${v}</li>`;
                                }).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                // Add unarchived versions if they exist
                if (app.versions.unarchived.length > 0) {
                    versionItems += `
                        <div class="version-group">
                            <h4 class="unarchived-label">Unarchived Versions</h4>
                            <ul class="version-list">
                                ${app.versions.unarchived.map(v => `<li>${v}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.id = `${app.id}Modal`;
                
                modal.innerHTML = `
                    <div class="modal-content">
                        <button class="close-modal">&times;</button>
                        <div class="modal-header">
                            <div class="modal-icon">
                                <img src="${app.icon}" alt="${app.title} Icon" onerror="this.src='https://via.placeholder.com/100/007aff/ffffff?text=App'">
                            </div>
                            <div>
                                <h2 class="modal-title">${app.title}</h2>
                                <p class="modal-developer">${app.developer}</p>
                            </div>
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-mobile-alt"></i> Compatibility</h3>
                            <p class="compatibility-text">${app.compatibility}</p>
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-align-left"></i> App Store Description</h3>
                            ${app.description.split('\n').map(p => `<p>${p}</p>`).join('')}
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-code-branch"></i> Version History</h3>
                            <div class="versions-container">
                                ${versionItems}
                            </div>
                        </div>
                    </div>
                `;
                
                modalContainer.appendChild(modal);
            });
            
            // Add modal close handlers
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.modal-overlay').classList.remove('active');
                    document.body.style.overflow = 'auto';
                });
            });
            
            // Close modal when clicking outside
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                });
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                        modal.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    });
                }
            });
        }
        
        // Tab switching
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show/hide views
                if (tabName === 'featured') {
                    featuredView.classList.add('active');
                    searchContainer.style.display = 'none';
                    searchResults.classList.remove('active');
                    renderFeaturedApps();
                } else if (tabName === 'search') {
                    featuredView.classList.remove('active');
                    searchContainer.style.display = 'block';
                    searchInput.focus();
                    searchResults.classList.add('active');
                    renderSearchResults(apps);
                }
            });
        });
        
        // Search functionality
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            
            if (searchTerm.length === 0) {
                renderSearchResults(apps);
                return;
            }
            
            const filteredApps = apps.filter(app => 
                app.title.toLowerCase().includes(searchTerm) || 
                app.developer.toLowerCase().includes(searchTerm)
            );
            
            renderSearchResults(filteredApps);
        });
        
        // Cancel search
        cancelSearch.addEventListener('click', function() {
            searchInput.value = '';
            tabs[0].click(); // Switch to Featured tab
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderFeaturedApps();
            createModals();
            
            // Add event listeners to buttons
            document.querySelectorAll('.app-button').forEach(button => {
                button.addEventListener('click', function() {
                    const appId = this.getAttribute('data-app-id');
                    document.getElementById(`${appId}Modal`).classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });
        });
    </script>
</body>
</html>
